!pragma charset UTF-8
@startuml discovery_specialist_detail
!theme plain
skinparam backgroundColor #FFFFFF
skinparam shadowing false
skinparam defaultFontName "Times New Roman"


skinparam rectangle {
    BackgroundColor<<user>> #E8E8FF
    BackgroundColor<<router>> #FFECB3
    BackgroundColor<<agent>> #FFD6D6
    BackgroundColor<<mcp>> #E1F5FE
    BackgroundColor<<tool>> #D4F1D4
    BackgroundColor<<output>> #F0E6FF
    BorderColor #333333
    FontSize 11
}

rectangle "User's query" as query <<user>>
rectangle "Root_agent" as root <<router>>
rectangle "discovery_agent" as discovery <<agent>>
rectangle "MCP Server" as mcp <<mcp>>
rectangle "Output" as output <<output>>

rectangle "discover_stocks\n_by_profile" as discover <<tool>>
rectangle "search_potential\n_stocks" as search <<tool>>
rectangle "get_stock_details\n_from_tcbs" as tcbs <<tool>>
rectangle "gemini_search\n_and_summarize" as gemini <<tool>>
rectangle "get_stock_data" as stock_data <<tool>>

query --> root
root --> discovery : "routing"

discovery --> mcp : "Gá»i MCP tools"

mcp -.-> discover
mcp -.-> search
mcp -.-> tcbs
mcp -.-> gemini
mcp -.-> stock_data

discover --> output
search --> output
tcbs --> output
gemini --> output
stock_data --> output

discovery --> output

@enduml
