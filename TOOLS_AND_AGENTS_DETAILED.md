# ğŸ“š CHI TIáº¾T CÃC TOOLS VÃ€ AGENTS TRONG Há»† THá»NG

## I. KIáº¾N TRÃšC Tá»”NG QUAN

Há»‡ thá»‘ng sá»­ dá»¥ng **8 Specialized Agents** + **25+ MCP Tools** Ä‘á»ƒ phÃ¢n tÃ­ch chá»©ng khoÃ¡n Viá»‡t Nam.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Users (CLI, Discord, Streamlit)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   MCP Orchestrator Server           â”‚
â”‚   - Query Router                    â”‚
â”‚   - Process Manager                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚                                     â”‚
 â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
 â”‚ Direct Executor â”‚          â”‚ 8 Agents System  â”‚
 â”‚ (Fast Mode)    â”‚          â”‚ (Complex Mode)   â”‚
 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                            â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚  25+ MCP Tools     â”‚
          â”‚  (Database Access) â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## II. 8 SPECIALIZED AGENTS

### 1. **AnalysisSpecialist** - PhÃ¢n tÃ­ch cá»• phiáº¿u
**Má»¥c Ä‘Ã­ch**: PhÃ¢n tÃ­ch ká»¹ thuáº­t, cÆ¡ báº£n, dá»± Ä‘oÃ¡n giÃ¡ cá»• phiáº¿u

**CÃ¡c tools Ä‘Æ°á»£c phÃ©p dÃ¹ng**:
```
Stock Data:
- get_stock_data (5 calls max)
- get_stock_price_prediction (3 calls max)
- generate_chart_from_data (3 calls max)
- get_stock_details_from_tcbs (10 calls max)

Financial:
- get_financial_data (3 calls max)
- get_financial_ratios (5 calls max)

AI Analysis:
- gemini_summarize (3 calls max)
- gemini_search_and_summarize (2 calls max)

Chart:
- generate_chart_from_data (3 calls max)
```

**Giá»›i háº¡n**: $0.50/truy váº¥n, max 0.5 giÃ¢y

**VÃ­ dá»¥ lá»‡nh**:
- "PhÃ¢n tÃ­ch ká»¹ thuáº­t VCB"
- "Dá»± Ä‘oÃ¡n giÃ¡ FPT 7 ngÃ y"
- "Biá»ƒu Ä‘á»“ HPG 30 ngÃ y"

---

### 2. **ScreenerSpecialist** - Lá»c cá»• phiáº¿u
**Má»¥c Ä‘Ã­ch**: TÃ¬m kiáº¿m, lá»c, xáº¿p háº¡ng cá»• phiáº¿u theo tiÃªu chÃ­

**CÃ¡c tools Ä‘Æ°á»£c phÃ©p dÃ¹ng**:
```
Screening:
- screen_stocks (3 calls max)
- get_screener_columns (1 call max)
- filter_stocks_by_criteria (5 calls max)
- rank_stocks_by_score (3 calls max)

Support:
- get_stock_details_from_tcbs (10 calls max)
- get_financial_data (3 calls max)
```

**Giá»›i háº¡n**: $0.20/truy váº¥n

**VÃ­ dá»¥ lá»‡nh**:
- "Lá»c cá»• phiáº¿u P/E < 15, Dividend > 3%"
- "TÃ¬m cá»• phiáº¿u growth trong ngÃ nh IT"
- "Xáº¿p háº¡ng cá»• phiáº¿u theo Ä‘iá»ƒm"

---

### 3. **InvestmentPlanner** - Láº­p káº¿ hoáº¡ch Ä‘áº§u tÆ°
**Má»¥c Ä‘Ã­ch**: Há»— trá»£ quy hoáº¡ch Ä‘áº§u tÆ°, phÃ¢n bá»• danh má»¥c, chiáº¿n lÆ°á»£c

**CÃ¡c tools Ä‘Æ°á»£c phÃ©p dÃ¹ng**:
```
Planning:
- gather_investment_profile (1 call max)
- calculate_portfolio_allocation (1 call max)
- generate_entry_strategy (1 call max)
- generate_risk_management_plan (1 call max)
- generate_monitoring_plan (1 call max)

Support:
- get_stock_data (5 calls max)
- get_financial_data (3 calls max)
```

**Giá»›i háº¡n**: $0.30/truy váº¥n

**VÃ­ dá»¥ lá»‡nh**:
- "Láº­p káº¿ hoáº¡ch Ä‘áº§u tÆ° 100 triá»‡u Ä‘á»“ng, má»©c rá»§i ro cao"
- "Chiáº¿n lÆ°á»£c vÃ o lá»‡nh cho VCB"
- "Káº¿ hoáº¡ch quáº£n lÃ½ rá»§i ro cho danh má»¥c"

---

### 4. **DiscoverySpecialist** - KhÃ¡m phÃ¡ cÆ¡ há»™i
**Má»¥c Ä‘Ã­ch**: TÃ¬m kiáº¿m cá»• phiáº¿u tiá»m nÄƒng, recommendations

**CÃ¡c tools Ä‘Æ°á»£c phÃ©p dÃ¹ng**:
```
Discovery:
- discover_stocks_by_profile (2 calls max)
- search_potential_stocks (3 calls max)
- filter_stocks_by_criteria (5 calls max)
- rank_stocks_by_score (3 calls max)

Support:
- get_stock_details_from_tcbs (10 calls max)
- gemini_search_and_summarize (3 calls max)
- get_stock_data (5 calls max)
```

**Giá»›i háº¡n**: $0.40/truy váº¥n

**VÃ­ dá»¥ lá»‡nh**:
- "TÃ¬m cá»• phiáº¿u tÆ°Æ¡ng tá»± FPT"
- "KhÃ¡m phÃ¡ cá»• phiáº¿u tiá»m nÄƒng tÄƒng trÆ°á»Ÿng"
- "Recommendation dá»±a trÃªn há»“ sÆ¡ Ä‘áº§u tÆ°"

---

### 5. **AlertManager** - Quáº£n lÃ½ cáº£nh bÃ¡o
**Má»¥c Ä‘Ã­ch**: Táº¡o, xem, xÃ³a cáº£nh bÃ¡o giÃ¡

**CÃ¡c tools Ä‘Æ°á»£c phÃ©p dÃ¹ng**:
```
Alerts:
- create_alert (5 calls max)
- get_user_alerts (3 calls max)
- delete_alert (5 calls max)
```

**Giá»›i háº¡n**: $0.05/truy váº¥n

**VÃ­ dá»¥ lá»‡nh**:
- "Cáº£nh bÃ¡o khi VCB > 90,000"
- "Xem cáº£nh bÃ¡o cá»§a tÃ´i"
- "XÃ³a cáº£nh bÃ¡o VCB"

---

### 6. **SubscriptionManager** - Quáº£n lÃ½ theo dÃµi
**Má»¥c Ä‘Ã­ch**: Quáº£n lÃ½ danh sÃ¡ch cá»• phiáº¿u theo dÃµi

**CÃ¡c tools Ä‘Æ°á»£c phÃ©p dÃ¹ng**:
```
Subscriptions:
- create_subscription (5 calls max)
- get_user_subscriptions (3 calls max)
- delete_subscription (5 calls max)
```

**Giá»›i háº¡n**: $0.05/truy váº¥n

**VÃ­ dá»¥ lá»‡nh**:
- "Theo dÃµi HPG"
- "Danh sÃ¡ch theo dÃµi cá»§a tÃ´i"
- "Bá» theo dÃµi VNM"

---

### 7. **MarketContextSpecialist** - Cáº£nh bÃ¡o thá»‹ trÆ°á»ng
**Má»¥c Ä‘Ã­ch**: Cung cáº¥p cáº£nh bÃ¡o thá»‹ trÆ°á»ng chung (VN-Index, ngÃ nh, breadth)

**CÃ¡c tools Ä‘Æ°á»£c phÃ©p dÃ¹ng**:
```
Market Data:
- get_market_overview (1 call max)
- get_sector_performance (2 calls max)
- get_market_top_movers (1 call max)
- screen_stocks (3 calls max)
```

**Giá»›i háº¡n**: $0.15/truy váº¥n

**VÃ­ dá»¥ lá»‡nh**:
- "Cáº£nh bÃ¡o thá»‹ trÆ°á»ng"
- "Hiá»‡u suáº¥t ngÃ nh hÃ´m nay"
- "Top gainers, losers"

---

### 8. **ComparisonSpecialist** - So sÃ¡nh cá»• phiáº¿u
**Má»¥c Ä‘Ã­ch**: So sÃ¡nh cá»• phiáº¿u, phÃ¢n tÃ­ch peer

**CÃ¡c tools Ä‘Æ°á»£c phÃ©p dÃ¹ng**:
```
Comparison:
- compare_stocks (5 calls max)
- get_peer_stocks (3 calls max)
- get_stock_details_from_tcbs (10 calls max)
- get_financial_ratios (5 calls max)
```

**Giá»›i háº¡n**: $0.25/truy váº¥n

**VÃ­ dá»¥ lá»‡nh**:
- "So sÃ¡nh VCB vs HPG"
- "Peer stocks cá»§a FPT"

---

## III. 25+ MCP TOOLS - CHI TIáº¾T

### A. STOCK DATA TOOLS (4 tools)

#### 1ï¸âƒ£ **get_stock_data**
```yaml
MÃ´ táº£: Láº¥y dá»¯ liá»‡u giÃ¡ cá»• phiáº¿u lá»‹ch sá»­ + indicators
Input:
  - symbol: "VCB" (string)
  - start_date: "2025-01-01" (optional)
  - end_date: "2025-01-14" (optional)
  - interval: "1m", "5m", "15m", "1h", "1d" (default)
  
Output:
  - price: OHLCV (Open, High, Low, Close, Volume)
  - technical_indicators: MA20, MA50, RSI, MACD, Bollinger Bands
  - timestamp: NgÃ y giá»

Chi phÃ­: $0.01/call
Thá»i gian: ~1 giÃ¢y
Max calls: 5/truy váº¥n
VÃ­ dá»¥: "Láº¥y giÃ¡ VCB tá»« 2025-01-01 Ä‘áº¿n 2025-01-14"
```

#### 2ï¸âƒ£ **get_stock_price_prediction**
```yaml
MÃ´ táº£: Dá»± Ä‘oÃ¡n giÃ¡ cá»• phiáº¿u báº±ng AI Ensemble
Input:
  - symbol: "FPT" (string)
  - table_type: "3d" (3 ngÃ y) hoáº·c "48d" (48 ngÃ y)
  
Output:
  - predictions: [NgÃ y, GiÃ¡ dá»± Ä‘oÃ¡n, Confidence]
  - model: "LSTM + ARIMA + XGBoost"
  - accuracy: RÂ² score

Chi phÃ­: $0.02/call
Thá»i gian: ~1.5 giÃ¢y
Max calls: 3/truy váº¥n
VÃ­ dá»¥: "Dá»± Ä‘oÃ¡n giÃ¡ FPT 7 ngÃ y"
```

#### 3ï¸âƒ£ **generate_chart_from_data**
```yaml
MÃ´ táº£: Táº¡o biá»ƒu Ä‘á»“ náº¿n (candlestick) interactive
Input:
  - symbol: "HPG" (string)
  - data: Historical OHLCV
  - indicators: ["MA20", "RSI", "MACD"] (optional)
  
Output:
  - chart_html: Interactive Plotly chart
  - saved_path: ~/Downloads/HPG_2025-01-14.html
  - status: "success"

Chi phÃ­: $0.05/call
Thá»i gian: ~2 giÃ¢y
Max calls: 3/truy váº¥n
VÃ­ dá»¥: "Váº½ biá»ƒu Ä‘á»“ VCB 30 ngÃ y"
```

#### 4ï¸âƒ£ **get_stock_details_from_tcbs**
```yaml
MÃ´ táº£: Láº¥y chi tiáº¿t cá»• phiáº¿u tá»« TCBS (70+ fields)
Input:
  - symbols: ["VCB", "HPG"] (list)
  
Output:
  - ThÃ´ng tin cÆ¡ báº£n: TÃªn, ngÃ nh, giÃ¡, P/E, P/B, Dividend
  - Chá»‰ bÃ¡o ká»¹ thuáº­t: RSI, MACD, Bollinger Bands
  - Tin tá»©c, xu hÆ°á»›ng
  - Báº£ng xáº¿p háº¡ng, rating

Chi phÃ­: $0.01/call
Thá»i gian: ~0.5 giÃ¢y
Max calls: 10/truy váº¥n
VÃ­ dá»¥: "Chi tiáº¿t VCB, FPT, HPG"
```

---

### B. FINANCIAL DATA TOOLS (6 tools)

#### 5ï¸âƒ£ **get_financial_data**
```yaml
MÃ´ táº£: Láº¥y bÃ¡o cÃ¡o tÃ i chÃ­nh (BCTC, KQKD, LCCT)
Input:
  - symbol: "VCB" (string)
  - report_type: "balance_sheet", "income", "cash_flow"
  - period: "Q3/2025", "9M/2025", "FY/2024"
  
Output:
  - balance_sheet: TÃ i sáº£n, ná»£, vá»‘n chá»§
  - income_statement: Doanh thu, lá»£i nhuáº­n
  - cash_flow: LÆ°u chuyá»ƒn tiá»n

Chi phÃ­: $0.02/call
Thá»i gian: ~1.5 giÃ¢y
Max calls: 3/truy váº¥n
VÃ­ dá»¥: "BÃ¡o cÃ¡o tÃ i chÃ­nh VCB Q3/2025"
```

#### 6ï¸âƒ£ **get_financial_ratios**
```yaml
MÃ´ táº£: TÃ­nh toÃ¡n tá»· lá»‡ tÃ i chÃ­nh (ROE, ROA, EPS, etc)
Input:
  - symbol: "FPT" (string)
  
Output:
  - Profitability: ROE, ROA, Net Margin
  - Liquidity: Current Ratio, Quick Ratio
  - Valuation: P/E, P/B, EV/EBITDA
  - Efficiency: Asset Turnover, Debt/Equity

Chi phÃ­: $0.01/call
Thá»i gian: ~0.5 giÃ¢y
Max calls: 5/truy váº¥n
VÃ­ dá»¥: "Tá»· lá»‡ tÃ i chÃ­nh FPT"
```

#### 7ï¸âƒ£ **get_income_statement**
```yaml
MÃ´ táº£: Báº£ng KQKD chi tiáº¿t
Input:
  - symbol: "HPG" (string)
  - periods: 4 (Q1, Q2, Q3, Q4 gáº§n nháº¥t)
  
Output:
  - Revenue, Cost of Goods Sold, Gross Profit
  - Operating Expenses, Operating Income
  - Net Income, EPS

Chi phÃ­: $0.02/call
Max calls: 3/truy váº¥n
VÃ­ dá»¥: "KQKD HPG 4 quÃ½ gáº§n nháº¥t"
```

#### 8ï¸âƒ£ **get_cash_flow**
```yaml
MÃ´ táº£: Báº£ng LCCT chi tiáº¿t
Input:
  - symbol: "VCB" (string)
  
Output:
  - Operating Cash Flow
  - Investing Cash Flow
  - Financing Cash Flow
  - Free Cash Flow

Chi phÃ­: $0.02/call
Max calls: 3/truy váº¥n
VÃ­ dá»¥: "LÆ°u chuyá»ƒn tiá»n VCB"
```

#### 9ï¸âƒ£ **get_ratio**
```yaml
MÃ´ táº£: Láº¥y tá»· lá»‡ cá»¥ thá»ƒ (P/E, P/B, Dividend)
Input:
  - symbol: "FPT" (string)
  - ratio_type: "PE", "PB", "DIVIDEND", "EPS"
  
Output:
  - GiÃ¡ trá»‹ tá»· lá»‡ hiá»‡n táº¡i
  - So sÃ¡nh vá»›i ngÃ nh, thá»‹ trÆ°á»ng
  - Xu hÆ°á»›ng lá»‹ch sá»­ (1Y, 3Y, 5Y)

Chi phÃ­: $0.01/call
Max calls: 5/truy váº¥n
```

#### ğŸ”Ÿ **get_price**
```yaml
MÃ´ táº£: Láº¥y giÃ¡ cá»• phiáº¿u real-time
Input:
  - symbols: ["VCB", "HPG", "FPT"] (list)
  
Output:
  - Current Price
  - Change %
  - Bid/Ask
  - Volume
  - Updated: timestamp

Chi phÃ­: $0.01/call
Max calls: 10/truy váº¥n
VÃ­ dá»¥: "GiÃ¡ VCB hiá»‡n táº¡i"
```

---

### C. ALERT MANAGEMENT TOOLS (3 tools)

#### 1ï¸âƒ£1ï¸âƒ£ **create_alert**
```yaml
MÃ´ táº£: Táº¡o cáº£nh bÃ¡o giÃ¡/chá»‰ bÃ¡o
Input:
  - user_id: "user123" (string)
  - symbol: "VCB" (string)
  - alert_type: "price", "technical" (enum)
  - condition: ">" hoáº·c "<" (enum)
  - value: 90000 (number)
  - indicator: "RSI", "MACD", "MA20" (for technical)
  
Output:
  - alert_id: "alert_xyz123"
  - status: "active"
  - created_at: timestamp

Chi phÃ­: $0.01/call
Max calls: 5/truy váº¥n
VÃ­ dá»¥: "Cáº£nh bÃ¡o khi VCB > 90000"
```

#### 1ï¸âƒ£2ï¸âƒ£ **get_user_alerts**
```yaml
MÃ´ táº£: Láº¥y danh sÃ¡ch cáº£nh bÃ¡o cá»§a user
Input:
  - user_id: "user123" (string)
  - symbol: "VCB" (optional) (string)
  
Output:
  - alerts: [
      {alert_id, symbol, condition, value, status, created_at}
    ]
  - count: sá»‘ cáº£nh bÃ¡o

Chi phÃ­: $0.01/call
Max calls: 3/truy váº¥n
VÃ­ dá»¥: "Xem cáº£nh bÃ¡o cá»§a tÃ´i"
```

#### 1ï¸âƒ£3ï¸âƒ£ **delete_alert**
```yaml
MÃ´ táº£: XÃ³a cáº£nh bÃ¡o
Input:
  - alert_id: "alert_xyz123" (string)
  - user_id: "user123" (string)
  
Output:
  - status: "deleted"
  - alert_id: "alert_xyz123"

Chi phÃ­: $0.01/call
Max calls: 5/truy váº¥n
VÃ­ dá»¥: "XÃ³a cáº£nh bÃ¡o VCB"
```

---

### D. SUBSCRIPTION TOOLS (3 tools)

#### 1ï¸âƒ£4ï¸âƒ£ **create_subscription**
```yaml
MÃ´ táº£: Theo dÃµi cá»• phiáº¿u (watchlist)
Input:
  - user_id: "user123" (string)
  - symbol: "HPG" (string)
  - notes: "Watch for earnings" (optional)
  
Output:
  - sub_id: "sub_abc123"
  - symbol: "HPG"
  - status: "active"
  - created_at: timestamp

Chi phÃ­: $0.01/call
Max calls: 5/truy váº¥n
VÃ­ dá»¥: "Theo dÃµi HPG"
```

#### 1ï¸âƒ£5ï¸âƒ£ **get_user_subscriptions**
```yaml
MÃ´ táº£: Láº¥y danh sÃ¡ch cá»• phiáº¿u Ä‘ang theo dÃµi
Input:
  - user_id: "user123" (string)
  
Output:
  - subscriptions: [
      {symbol, notes, created_at, current_price}
    ]
  - count: sá»‘ cá»• phiáº¿u theo dÃµi

Chi phÃ­: $0.01/call
Max calls: 3/truy váº¥n
VÃ­ dá»¥: "Danh sÃ¡ch theo dÃµi"
```

#### 1ï¸âƒ£6ï¸âƒ£ **delete_subscription**
```yaml
MÃ´ táº£: Bá» theo dÃµi cá»• phiáº¿u
Input:
  - sub_id: "sub_abc123" (string)
  - user_id: "user123" (string)
  
Output:
  - status: "deleted"
  - symbol: "HPG"

Chi phÃ­: $0.01/call
Max calls: 5/truy váº¥n
VÃ­ dá»¥: "Bá» theo dÃµi VNM"
```

---

### E. AI ANALYSIS TOOLS (3 tools) - EXPENSIVE

#### 1ï¸âƒ£7ï¸âƒ£ **gemini_summarize**
```yaml
MÃ´ táº£: TÃ³m táº¯t dá»¯ liá»‡u báº±ng Gemini AI
Input:
  - data: {text hoáº·c dá»¯ liá»‡u cá»¥ thá»ƒ}
  - context: "technical" / "fundamental" / "news"
  - length: "short" (100 tá»«) / "medium" (300 tá»«) / "long" (500 tá»«)
  
Output:
  - summary: TÃ³m táº¯t chuyÃªn sÃ¢u
  - key_points: [Äiá»ƒm chÃ­nh]
  - sentiment: "bullish" / "neutral" / "bearish"

Chi phÃ­: $0.10/call âš ï¸ Äáº®T
Max calls: 3/truy váº¥n
Thá»i gian: ~2 giÃ¢y
VÃ­ dá»¥: "TÃ³m táº¯t bÃ¡o cÃ¡o FPT"
```

#### 1ï¸âƒ£8ï¸âƒ£ **gemini_search_and_summarize**
```yaml
MÃ´ táº£: TÃ¬m kiáº¿m web + tÃ³m táº¯t báº±ng Gemini
Input:
  - query: "VCB earnings q4 2024" (string)
  - num_results: 5-10 (int)
  
Output:
  - sources: [URLs]
  - summary: TÃ³m táº¯t tá»« nhiá»u nguá»“n
  - sentiment: Cáº£m nháº­n thá»‹ trÆ°á»ng

Chi phÃ­: $0.15/call âš ï¸ Ráº¤T Äáº®T
Max calls: 2/truy váº¥n
Thá»i gian: ~3 giÃ¢y
VÃ­ dá»¥: "TÃ¬m tin vá» VCB Q4 2024"
```

#### 1ï¸âƒ£9ï¸âƒ£ **batch_summarize**
```yaml
MÃ´ táº£: TÃ³m táº¯t hÃ ng loáº¡t symbols
Input:
  - symbols: ["VCB", "HPG", "FPT"] (list)
  - context: "comparison"
  
Output:
  - summaries: {symbol: tÃ³m táº¯t}
  - comparison: So sÃ¡nh

Chi phÃ­: $0.20/call âš ï¸ Ráº¤T Ráº¤T Äáº®T
Max calls: 1/truy váº¥n
VÃ­ dá»¥: "So sÃ¡nh VCB vs HPG vs FPT"
```

---

### F. SCREENING TOOLS (4 tools)

#### 2ï¸âƒ£0ï¸âƒ£ **screen_stocks**
```yaml
MÃ´ táº£: Lá»c cá»• phiáº¿u theo 80+ tiÃªu chÃ­
Input:
  - criteria: {
      "PE": "< 15",
      "PB": "< 1.5",
      "Dividend": "> 3%",
      "ROE": "> 15%"
    }
  - sector: "Banking" (optional)
  - limit: 20 (max results)
  
Output:
  - stocks: [
      {symbol, company, PE, PB, Dividend, score}
    ]
  - count: sá»‘ cá»• phiáº¿u tÃ¬m Ä‘Æ°á»£c

Chi phÃ­: $0.05/call
Max calls: 3/truy váº¥n
VÃ­ dá»¥: "Lá»c cá»• phiáº¿u P/E < 15"
```

#### 2ï¸âƒ£1ï¸âƒ£ **get_screener_columns**
```yaml
MÃ´ táº£: Láº¥y danh sÃ¡ch columns cÃ³ sáºµn Ä‘á»ƒ lá»c
Output:
  - columns: [
      {name: "PE", type: "number", operators: ["<", ">", "="]},
      {name: "PB", type: "number", operators: ...},
      {name: "Dividend", type: "number", operators: ...},
      {name: "Sector", type: "string", operators: ["=", "!="]},
      ... 80+ columns
    ]

Chi phÃ­: $0.0/call (FREE)
Max calls: 1/truy váº¥n
VÃ­ dá»¥: "Xem tÃ¹y chá»n lá»c"
```

#### 2ï¸âƒ£2ï¸âƒ£ **filter_stocks_by_criteria**
```yaml
MÃ´ táº£: Lá»c cá»• phiáº¿u chi tiáº¿t hÆ¡n
Input:
  - criteria: {...}  (like screen_stocks)
  - order_by: "PE", "Dividend", "Score"
  
Output:
  - stocks: [Danh sÃ¡ch lá»c]

Chi phÃ­: $0.03/call
Max calls: 5/truy váº¥n
```

#### 2ï¸âƒ£3ï¸âƒ£ **rank_stocks_by_score**
```yaml
MÃ´ táº£: Xáº¿p háº¡ng cá»• phiáº¿u theo Ä‘iá»ƒm composite
Input:
  - symbols: ["VCB", "HPG", ...] (list)
  - criteria: {...} (weighting)
  
Output:
  - ranking: [
      {symbol, score, rank, reason}
    ]

Chi phÃ­: $0.02/call
Max calls: 3/truy váº¥n
VÃ­ dá»¥: "Xáº¿p háº¡ng cá»• phiáº¿u theo Ä‘iá»ƒm"
```

---

### G. INVESTMENT PLANNING TOOLS (5 tools)

#### 2ï¸âƒ£4ï¸âƒ£ **gather_investment_profile**
```yaml
MÃ´ táº£: Thu tháº­p há»“ sÆ¡ Ä‘áº§u tÆ° cá»§a ngÆ°á»i dÃ¹ng
Input:
  - user_id: "user123" (string)
  - capital: 100000000 (VNÄ)
  - risk_level: "low" / "medium" / "high"
  - time_horizon: "short" / "medium" / "long"
  
Output:
  - profile: {Há»“ sÆ¡ chi tiáº¿t}
  - recommendations: [Khuyáº¿n nghá»‹ Ä‘áº§u tÆ°]

Chi phÃ­: $0.05/call
Max calls: 1/truy váº¥n
```

#### 2ï¸âƒ£5ï¸âƒ£ **calculate_portfolio_allocation**
```yaml
MÃ´ táº£: TÃ­nh phÃ¢n bá»• danh má»¥c theo profile
Input:
  - profile: {...}
  - symbols: ["VCB", "HPG", "FPT"] (optional)
  
Output:
  - allocation: {
      "VCB": "30%",
      "HPG": "25%",
      "FPT": "20%",
      "Cash": "25%"
    }
  - expected_return: "12-15%"
  - risk: "Moderate"

Chi phÃ­: $0.05/call
Max calls: 1/truy váº¥n
```

#### 2ï¸âƒ£6ï¸âƒ£ **generate_entry_strategy**
```yaml
MÃ´ táº£: Chiáº¿n lÆ°á»£c vÃ o lá»‡nh
Input:
  - symbol: "VCB" (string)
  - amount: 10000000 (VNÄ)
  
Output:
  - strategy: {
      "entry_price": 88500,
      "entry_volumes": ["50% ngay", "50% náº¿u giÃ¡ giáº£m 5%"],
      "target_price": [92000, 95000],
      "stop_loss": 85000
    }
  - reasoning: LÃ½ do

Chi phÃ­: $0.05/call
Max calls: 1/truy váº¥n
```

#### 2ï¸âƒ£7ï¸âƒ£ **generate_risk_management_plan**
```yaml
MÃ´ táº£: Káº¿ hoáº¡ch quáº£n lÃ½ rá»§i ro
Input:
  - portfolio: {...}
  
Output:
  - plan: {
      "position_sizing": "KÃ­ch thÆ°á»›c vá»‹ tháº¿ tá»‘i Ä‘a",
      "stop_loss": "Má»©c cáº¯t lá»—",
      "profit_taking": "Láº¥y lá»£i nhuáº­n",
      "hedging": "Báº£o vá»‡ danh má»¥c"
    }

Chi phÃ­: $0.05/call
Max calls: 1/truy váº¥n
```

#### 2ï¸âƒ£8ï¸âƒ£ **generate_monitoring_plan**
```yaml
MÃ´ táº£: Káº¿ hoáº¡ch giÃ¡m sÃ¡t danh má»¥c
Input:
  - portfolio: {...}
  
Output:
  - plan: {
      "check_frequency": "HÃ ng ngÃ y",
      "key_metrics": ["PE", "RSI", "MA20"],
      "alerts": ["Giáº£m 5%", "RSI > 70"],
      "rebalancing": "QuÃ½ má»™t láº§n"
    }

Chi phÃ­: $0.05/call
Max calls: 1/truy váº¥n
```

---

### H. DISCOVERY TOOLS (4 tools)

#### 2ï¸âƒ£9ï¸âƒ£ **discover_stocks_by_profile**
```yaml
MÃ´ táº£: KhÃ¡m phÃ¡ cá»• phiáº¿u dá»±a trÃªn profile
Input:
  - profile: {...} (from gather_investment_profile)
  - num_stocks: 10
  
Output:
  - stocks: [
      {symbol, company, reason, score, risk}
    ]

Chi phÃ­: $0.08/call
Max calls: 2/truy váº¥n
```

#### 3ï¸âƒ£0ï¸âƒ£ **search_potential_stocks**
```yaml
MÃ´ táº£: TÃ¬m kiáº¿m cá»• phiáº¿u tiá»m nÄƒng
Input:
  - criteria: "growth" / "value" / "momentum" / "quality"
  - sector: "Banking" (optional)
  - limit: 15
  
Output:
  - stocks: [Danh sÃ¡ch tÃ¬m Ä‘Æ°á»£c]
  - explanation: LÃ½ do tÃ¬m

Chi phÃ­: $0.06/call
Max calls: 3/truy váº¥n
```

#### 3ï¸âƒ£1ï¸âƒ£ **get_stock_details_from_tcbs** (reused)
```
(Xem pháº§n Stock Data Tools)
Chi phÃ­: $0.01/call
Max calls: 10/truy váº¥n
```

#### 3ï¸âƒ£2ï¸âƒ£ **gemini_search_and_summarize** (reused)
```
(Xem pháº§n AI Analysis Tools)
Chi phÃ­: $0.15/call
Max calls: 3/truy váº¥n (trong Discovery)
```

---

### I. MARKET DATA TOOLS (3 tools)

#### 3ï¸âƒ£3ï¸âƒ£ **get_market_overview**
```yaml
MÃ´ táº£: Cáº£nh bÃ¡o thá»‹ trÆ°á»ng chung
Output:
  - VN-Index: Äiá»ƒm sá»‘, thay Ä‘á»•i %
  - HNX-Index: Äiá»ƒm sá»‘, thay Ä‘á»•i %
  - UPCOM: Äiá»ƒm sá»‘, thay Ä‘á»•i %
  - Market Breadth: TÄƒng/Giáº£m/Dá»«ng
  - Total Volume, Value

Chi phÃ­: $0.01/call
Max calls: 1/truy váº¥n
```

#### 3ï¸âƒ£4ï¸âƒ£ **get_sector_performance**
```yaml
MÃ´ táº£: Hiá»‡u suáº¥t ngÃ nh
Input:
  - sector: "Banking" (optional, láº¥y all náº¿u khÃ´ng)
  
Output:
  - sectors: [
      {name: "Banking", change: "+2.5%", leaders: [...]}
    ]

Chi phÃ­: $0.02/call
Max calls: 2/truy váº¥n
```

#### 3ï¸âƒ£5ï¸âƒ£ **get_market_top_movers**
```yaml
MÃ´ táº£: Top gainers, losers, volume leaders
Output:
  - gainers: [{symbol, change, price}]
  - losers: [{symbol, change, price}]
  - volume_leaders: [{symbol, volume}]

Chi phÃ­: $0.01/call
Max calls: 1/truy váº¥n
```

---

## IV. TOOL ALLOCATION MATRIX

| Agent | Tools Allowed | Max Cost | Tools Count |
|-------|---------------|----------|-------------|
| **AnalysisSpecialist** | Stock Data + Financial + AI | $0.50 | 12 |
| **ScreenerSpecialist** | Screening + Support | $0.20 | 6 |
| **InvestmentPlanner** | Planning + Support | $0.30 | 7 |
| **DiscoverySpecialist** | Discovery + Support + AI | $0.40 | 8 |
| **AlertManager** | Alerts only | $0.05 | 3 |
| **SubscriptionManager** | Subscriptions only | $0.05 | 3 |
| **MarketContextSpecialist** | Market Data + Screening | $0.15 | 4 |
| **ComparisonSpecialist** | Comparison + Support | $0.25 | 5 |
| **DirectExecutor** | Simple fast tools | $0.10 | 9 |

---

## V. FLOW DIAGRAM - CÃC TOOLS ÄÆ¯á»¢C Gá»ŒI LIÃŠN TIáº¾P

### VÃ­ dá»¥ 1: "PhÃ¢n tÃ­ch VCB"
```
AnalysisSpecialist (selected)
  â”œâ”€> get_stock_data (VCB)
  â”‚   â””â”€> Returns: OHLCV + MA, RSI, MACD
  â”œâ”€> get_stock_details_from_tcbs (VCB)
  â”‚   â””â”€> Returns: 70 fields
  â”œâ”€> get_financial_data (VCB)
  â”‚   â””â”€> Returns: BS, IS, CF
  â”œâ”€> get_financial_ratios (VCB)
  â”‚   â””â”€> Returns: ROE, ROA, P/E, etc
  â””â”€> gemini_summarize (all data)
      â””â”€> Returns: AI summary + sentiment
```

### VÃ­ dá»¥ 2: "Lá»c cá»• phiáº¿u P/E < 15"
```
ScreenerSpecialist (selected)
  â”œâ”€> get_screener_columns ()
  â”‚   â””â”€> Returns: Available columns
  â””â”€> screen_stocks (PE < 15)
      â””â”€> Returns: List of stocks
      â””â”€> get_stock_details_from_tcbs (results)
          â””â”€> Returns: Details for each stock
```

### VÃ­ dá»¥ 3: "Láº­p káº¿ hoáº¡ch Ä‘áº§u tÆ° 100 triá»‡u"
```
InvestmentPlanner (selected)
  â”œâ”€> gather_investment_profile (user data)
  â”‚   â””â”€> Returns: Profile
  â”œâ”€> calculate_portfolio_allocation (profile)
  â”‚   â””â”€> Returns: PhÃ¢n bá»•
  â”œâ”€> generate_entry_strategy (symbols)
  â”‚   â””â”€> Returns: Chiáº¿n lÆ°á»£c vÃ o lá»‡nh
  â”œâ”€> generate_risk_management_plan (portfolio)
  â”‚   â””â”€> Returns: Káº¿ hoáº¡ch rá»§i ro
  â””â”€> generate_monitoring_plan (portfolio)
      â””â”€> Returns: Káº¿ hoáº¡ch giÃ¡m sÃ¡t
```

---

## VI. RESOURCE MONITORING & CONTROL

### Least Privilege Principle
- Má»—i agent chá»‰ Ä‘Æ°á»£c dÃ¹ng tools cáº§n thiáº¿t
- KhÃ´ng cÃ³ agent nÃ o dÃ¹ng all 25+ tools
- Giá»›i háº¡n gá»i tool: 1-10/truy váº¥n tÃ¹y agent

### Cost Control
```python
AGENT_COST_LIMITS = {
    "AnalysisSpecialist": 0.50,      # $0.50/truy váº¥n
    "ScreenerSpecialist": 0.20,
    "InvestmentPlanner": 0.30,
    "DiscoverySpecialist": 0.40,
    "AlertManager": 0.05,
    "SubscriptionManager": 0.05,
    "MarketContextSpecialist": 0.15,
    "ComparisonSpecialist": 0.25,
}
```

### Quota Management
```python
# VÃ­ dá»¥ AnalysisSpecialist:
"get_stock_data": max 5 calls
"get_stock_price_prediction": max 3 calls
"gemini_summarize": max 3 calls (EXPENSIVE!)
```

---

## VII. ERROR HANDLING & FALLBACK

### Náº¿u Tool Tháº¥t Báº¡i
```
Tool Error
  â”œâ”€> Log error
  â”œâ”€> Retry (max 2 times)
  â”œâ”€> If still fails:
  â”‚   â””â”€> Return partial data / cached data
  â””â”€> Agent continues vá»›i thÃ´ng tin cÃ³ sáºµn
```

### Náº¿u Agent Háº¿t Chi PhÃ­
```
Cost Limit Exceeded
  â””â”€> Agent stops
  â””â”€> Return partial result
  â””â”€> Suggest: "QuÃ¡ nhiá»u analysis, vui lÃ²ng thá»­ láº¡i sau"
```

---

## VIII. SUMMARY TABLE - CHI TIáº¾T Táº¤T Cáº¢ 25+ TOOLS

| # | Tool Name | Category | Cost | Max Calls | Thá»i Gian |
|---|-----------|----------|------|-----------|-----------|
| 1 | get_stock_data | Stock Data | $0.01 | 5 | 1s |
| 2 | get_stock_price_prediction | Stock Data | $0.02 | 3 | 1.5s |
| 3 | generate_chart_from_data | Stock Data | $0.05 | 3 | 2s |
| 4 | get_stock_details_from_tcbs | Stock Data | $0.01 | 10 | 0.5s |
| 5 | get_financial_data | Financial | $0.02 | 3 | 1.5s |
| 6 | get_financial_ratios | Financial | $0.01 | 5 | 0.5s |
| 7 | get_income_statement | Financial | $0.02 | 3 | 1s |
| 8 | get_cash_flow | Financial | $0.02 | 3 | 1s |
| 9 | get_ratio | Financial | $0.01 | 5 | 0.3s |
| 10 | get_latest_price | Financial | $0.01 | 10 | 0.3s |
| 11 | create_alert | Alerts | $0.01 | 5 | 0.3s |
| 12 | get_user_alerts | Alerts | $0.01 | 3 | 0.2s |
| 13 | delete_alert | Alerts | $0.01 | 5 | 0.3s |
| 14 | create_subscription | Subscriptions | $0.01 | 5 | 0.3s |
| 15 | get_user_subscriptions | Subscriptions | $0.01 | 3 | 0.2s |
| 16 | delete_subscription | Subscriptions | $0.01 | 5 | 0.3s |
| 17 | gemini_summarize | AI Analysis | $0.10 | 3 | 2s |
| 18 | gemini_search_and_summarize | AI Analysis | $0.15 | 2-3 | 3s |
| 19 | batch_summarize | AI Analysis | $0.20 | 1 | 4s |
| 20 | screen_stocks | Screening | $0.05 | 3 | 2s |
| 21 | get_screener_columns | Screening | $0.00 | 1 | 0.1s |
| 22 | filter_stocks_by_criteria | Screening | $0.03 | 5 | 1s |
| 23 | rank_stocks_by_score | Screening | $0.02 | 3 | 0.8s |
| 24 | gather_investment_profile | Investment | $0.05 | 1 | 1s |
| 25 | calculate_portfolio_allocation | Investment | $0.05 | 1 | 1s |
| 26 | generate_entry_strategy | Investment | $0.05 | 1 | 1s |
| 27 | generate_risk_management_plan | Investment | $0.05 | 1 | 1s |
| 28 | generate_monitoring_plan | Investment | $0.05 | 1 | 1s |
| 29 | discover_stocks_by_profile | Discovery | $0.08 | 2 | 2.5s |
| 30 | search_potential_stocks | Discovery | $0.06 | 3 | 2s |
| 31 | get_market_overview | Market Data | $0.01 | 1 | 0.5s |
| 32 | get_sector_performance | Market Data | $0.02 | 2 | 1s |
| 33 | get_market_top_movers | Market Data | $0.01 | 1 | 0.5s |

---

## IX. CÃ“ THÃŠM KHÃ”NG?

Há»‡ thá»‘ng cÃ³ thá»ƒ má»Ÿ rá»™ng vá»›i tools thÃªm:
- ğŸ“Š **Technical Analysis Tools**: Fibonacci, Support/Resistance
- ğŸ“ˆ **Portfolio Tools**: Optimization, Backtesting
- ğŸ”” **Notification Tools**: Email, SMS alerts
- ğŸ’¬ **Community Tools**: Sentiment from forums
- ğŸ† **Recommendation Tools**: Model-based suggestions

---

*TÃ i liá»‡u cáº­p nháº­t: 14/01/2025*
